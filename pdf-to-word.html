<form id="uploadForm" enctype="multipart/form-data">
  <input type="file" name="file" id="fileInput" required>
  <select name="conversion" id="conversion">
    <option value="pdf_to_word">PDF → Word</option>
    <option value="word_to_pdf">Word → PDF</option>
  </select>
  <button type="submit">Convert</button>
</form>

<a id="downloadLink" style="display:none">Download Converted File</a>

<script>
const form = document.getElementById('uploadForm');
const downloadLink = document.getElementById('downloadLink');

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const fileInput = document.getElementById('fileInput');
  const conversion = document.getElementById('conversion').value;
  const file = fileInput.files[0];
  if(!file) return;

  const formData = new FormData();
  formData.append('file', file);
  formData.append('conversion', conversion);

  // Send request to Python backend
  const response = await fetch('http://localhost:5000/convert', {
    method: 'POST',
    body: formData
  });

  if (response.ok) {
    const blob = await response.blob();
    const url = URL.createObjectURL(blob);
    downloadLink.href = url;
    downloadLink.download = file.name.split('.')[0] + (conversion === 'pdf_to_word' ? '.docx' : '.pdf');
    downloadLink.style.display = 'inline';
    downloadLink.textContent = 'Download Converted File';
  } else {
    alert('Conversion failed!');
  }
});
</script>
